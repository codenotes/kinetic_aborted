<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>music21.corpus.manager &mdash; music21 Documentation</title>
    
    <link rel="stylesheet" href="../_static/m21.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="top" title="music21 Documentation" href="../index.html" />
    <link rel="up" title="Module Reference" href="index.html" />
    <link rel="next" title="music21.corpus.virtual" href="moduleCorpusVirtual.html" />
    <link rel="prev" title="music21.corpus.corpora" href="moduleCorpusCorpora.html" /><link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'>
<script src='http://artusi.xyz/music21j/ext/require/require.js'></script>
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="moduleCorpusVirtual.html" title="music21.corpus.virtual"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="moduleCorpusCorpora.html" title="music21.corpus.corpora"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">music21</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Module Reference</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="moduleCorpusCorpora.html"
                        title="previous chapter">music21.corpus.corpora</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="moduleCorpusVirtual.html"
                        title="next chapter">music21.corpus.virtual</a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">music21.corpus.manager</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
</ul>

<h3><a href="../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About Music21</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usersGuide/index.html">User&#8217;s Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Module Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developerReference/index.html">Developer Reference</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/moduleReference/moduleCorpusManager.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="music21-corpus-manager">
<span id="modulecorpusmanager"></span><h1>music21.corpus.manager<a class="headerlink" href="#music21-corpus-manager" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-music21.corpus.manager"></span><p>The manager module handles requests across multiple corpora.  It should be the default
interface to searching corpora.</p>
<p>New in v3 &#8211; previously most were static methods on corpus.corpora.Corpus, but that
seemed inappropriate since these work across corpora.</p>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="music21.corpus.manager.cacheMetadataBundleFromDisk">
<code class="descclassname">music21.corpus.manager.</code><code class="descname">cacheMetadataBundleFromDisk</code><span class="sig-paren">(</span><em>corpusObject</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.corpus.manager.cacheMetadataBundleFromDisk" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a corpus&#8217; metadata bundle from its stored JSON file on disk.</p>
</dd></dl>

<dl class="function">
<dt id="music21.corpus.manager.fromCacheName">
<code class="descclassname">music21.corpus.manager.</code><code class="descname">fromCacheName</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.corpus.manager.fromCacheName" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate a specific corpus based on its <cite>cacheName</cite>:</p>
<p>These are the same as <cite>fromName</cite>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">fromCacheName</span><span class="p">(</span><span class="s1">&#39;core&#39;</span><span class="p">)</span>
<span class="go">&lt;music21.corpus.corpora.CoreCorpus&gt;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">fromCacheName</span><span class="p">(</span><span class="s1">&#39;virtual&#39;</span><span class="p">)</span>
<span class="go">&lt;music21.corpus.corpora.VirtualCorpus&gt;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">fromCacheName</span><span class="p">(</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>
<span class="go">&lt;music21.corpus.corpora.LocalCorpus: &#39;local&#39;&gt;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">fromCacheName</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="go">&lt;music21.corpus.corpora.LocalCorpus: &#39;local&#39;&gt;</span>
</pre></div>
</div>
<p>Other local corpora are different and prefaced by &#8220;local-&#8221;:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">fromCacheName</span><span class="p">(</span><span class="s1">&#39;local-testDummy&#39;</span><span class="p">)</span>
<span class="go">&lt;music21.corpus.corpora.LocalCorpus: &#39;testDummy&#39;&gt;</span>
</pre></div>
</div>
<p>Raises a corpus exception if
it is not an allowable cache name.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">fromCacheName</span><span class="p">(</span><span class="s1">&#39;testDummy&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">music21.exceptions21.CorpusException</span>: <span class="n">Cannot parse a cacheName of &#39;testDummy&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="music21.corpus.manager.fromName">
<code class="descclassname">music21.corpus.manager.</code><code class="descname">fromName</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.corpus.manager.fromName" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate a specific corpus based on <cite>name</cite>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">&#39;core&#39;</span><span class="p">)</span>
<span class="go">&lt;music21.corpus.corpora.CoreCorpus&gt;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">&#39;virtual&#39;</span><span class="p">)</span>
<span class="go">&lt;music21.corpus.corpora.VirtualCorpus&gt;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">&#39;local&#39;</span><span class="p">)</span>
<span class="go">&lt;music21.corpus.corpora.LocalCorpus: &#39;local&#39;&gt;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="go">&lt;music21.corpus.corpora.LocalCorpus: &#39;local&#39;&gt;</span>
</pre></div>
</div>
<p>Note that this corpus probably does not exist on disk, but it&#8217;s ready to have
paths added to it and to be stored on disk.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">fromName</span><span class="p">(</span><span class="s1">&#39;testDummy&#39;</span><span class="p">)</span>
<span class="go">&lt;music21.corpus.corpora.LocalCorpus: &#39;testDummy&#39;&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="music21.corpus.manager.getMetadataBundleByCorpus">
<code class="descclassname">music21.corpus.manager.</code><code class="descname">getMetadataBundleByCorpus</code><span class="sig-paren">(</span><em>corpusObject</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.corpus.manager.getMetadataBundleByCorpus" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the metadata bundle for a single Corpus object</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vc</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">corpora</span><span class="o">.</span><span class="n">VirtualCorpus</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mdb1</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">getMetadataBundleByCorpus</span><span class="p">(</span><span class="n">vc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mdb1</span>
<span class="go">&lt;music21.metadata.bundles.MetadataBundle &#39;virtual&#39;: {11 entries}&gt;</span>
</pre></div>
</div>
<p>This is the same as calling <cite>metadataBundle</cite> on the corpus itself,
but this is the routine that actually does the work. In other words,
it&#8217;s the call on the object that is redundant, not this routine.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mdb1</span> <span class="ow">is</span> <span class="n">vc</span><span class="o">.</span><span class="n">metadataBundle</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="music21.corpus.manager.getWork">
<code class="descclassname">music21.corpus.manager.</code><code class="descname">getWork</code><span class="sig-paren">(</span><em>workName</em>, <em>movementNumber=None</em>, <em>fileExtensions=None</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.corpus.manager.getWork" title="Permalink to this definition">¶</a></dt>
<dd><p>this parse method is called from <cite>corpus.parse()</cite> and does nothing differently from it.</p>
<p>Searches all corpora for a file that matches the name and returns it parsed.</p>
</dd></dl>

<dl class="function">
<dt id="music21.corpus.manager.iterateCorpora">
<code class="descclassname">music21.corpus.manager.</code><code class="descname">iterateCorpora</code><span class="sig-paren">(</span><em>returnObjects=True</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.corpus.manager.iterateCorpora" title="Permalink to this definition">¶</a></dt>
<dd><p>a generator that iterates over the corpora (either as objects or as names)
for use in pan corpus searching.</p>
<p>This test will only show the first three, because it needs to run the same
on every system:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">corpusObject</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">iterateCorpora</span><span class="p">()):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">corpusObject</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<span class="gp">... </span>       <span class="k">break</span>
<span class="go">&lt;music21.corpus.corpora.CoreCorpus&gt;</span>
<span class="go">&lt;music21.corpus.corpora.VirtualCorpus&gt;</span>
<span class="go">&lt;music21.corpus.corpora.LocalCorpus: &#39;local&#39;&gt;    </span>
</pre></div>
</div>
<p>We can also get names instead... Note that the name of the main localcorpus is &#8216;local&#8217; not
None</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">corpusName</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">iterateCorpora</span><span class="p">(</span><span class="n">returnObjects</span><span class="o">=</span><span class="kc">False</span><span class="p">)):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">corpusName</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<span class="gp">... </span>       <span class="k">break</span>
<span class="go">core</span>
<span class="go">virtual</span>
<span class="go">local</span>
</pre></div>
</div>
<p>New in v.3</p>
</dd></dl>

<dl class="function">
<dt id="music21.corpus.manager.listLocalCorporaNames">
<code class="descclassname">music21.corpus.manager.</code><code class="descname">listLocalCorporaNames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#music21.corpus.manager.listLocalCorporaNames" title="Permalink to this definition">¶</a></dt>
<dd><p>List the names of all user-defined local corpora.</p>
<p>The entry for None refers to the default local corpus.</p>
</dd></dl>

<dl class="function">
<dt id="music21.corpus.manager.listSearchFields">
<code class="descclassname">music21.corpus.manager.</code><code class="descname">listSearchFields</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#music21.corpus.manager.listSearchFields" title="Permalink to this definition">¶</a></dt>
<dd><p>List all available search field names:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">listSearchFields</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">field</span>
<span class="gp">...</span>
<span class="go">&#39;alternativeTitle&#39;</span>
<span class="go">&#39;ambitus&#39;</span>
<span class="go">&#39;composer&#39;</span>
<span class="go">&#39;date&#39;</span>
<span class="go">&#39;keySignatureFirst&#39;</span>
<span class="go">&#39;keySignatures&#39;</span>
<span class="go">&#39;localeOfComposition&#39;</span>
<span class="go">&#39;movementName&#39;</span>
<span class="go">&#39;movementNumber&#39;</span>
<span class="go">&#39;noteCount&#39;</span>
<span class="go">&#39;number&#39;</span>
<span class="go">&#39;opusNumber&#39;</span>
<span class="go">&#39;pitchHighest&#39;</span>
<span class="go">&#39;pitchLowest&#39;</span>
<span class="go">&#39;quarterLength&#39;</span>
<span class="go">&#39;tempoFirst&#39;</span>
<span class="go">&#39;tempos&#39;</span>
<span class="go">&#39;timeSignatureFirst&#39;</span>
<span class="go">&#39;timeSignatures&#39;</span>
<span class="go">&#39;title&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="music21.corpus.manager.parse">
<code class="descclassname">music21.corpus.manager.</code><code class="descname">parse</code><span class="sig-paren">(</span><em>workName</em>, <em>movementNumber=None</em>, <em>number=None</em>, <em>fileExtensions=None</em>, <em>forceSource=False</em>, <em>format=None</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.corpus.manager.parse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="music21.corpus.manager.readAllMetadataBundlesFromDisk">
<code class="descclassname">music21.corpus.manager.</code><code class="descname">readAllMetadataBundlesFromDisk</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#music21.corpus.manager.readAllMetadataBundlesFromDisk" title="Permalink to this definition">¶</a></dt>
<dd><p>Read each corpus&#8217;s metadata bundle and store it in memory.</p>
</dd></dl>

<dl class="function">
<dt id="music21.corpus.manager.search">
<code class="descclassname">music21.corpus.manager.</code><code class="descname">search</code><span class="sig-paren">(</span><em>query</em>, <em>field=None</em>, <em>corpusNames=None</em>, <em>fileExtensions=None</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.corpus.manager.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Search all stored metadata bundles and return a list of file paths.</p>
<p>The <code class="docutils literal"><span class="pre">names</span></code> parameter can be used to specify which corpora to search,
for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;bach&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">corpusNames</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;core&#39;</span><span class="p">,</span> <span class="s1">&#39;virtual&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="go">&lt;music21.metadata.bundles.MetadataBundle {151 entries}&gt;</span>
</pre></div>
</div>
<p>If <code class="docutils literal"><span class="pre">names</span></code> is None, all corpora known to music21 will be searched.</p>
<p>This method uses stored metadata and thus, on first usage, will incur a
performance penalty during metadata loading.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="moduleCorpusVirtual.html" title="music21.corpus.virtual"
             >next</a> |</li>
        <li class="right" >
          <a href="moduleCorpusCorpora.html" title="music21.corpus.corpora"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">music21</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Module Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2006-2016, Michael Scott Cuthbert and cuthbertLab.
      Last updated on Aug 21, 2016.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>